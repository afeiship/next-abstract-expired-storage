!function(){var e=e||this||window||Function("return this")(),t=e.nx||require("next-js-core2"),n=t.declare("nx.AbstractExpiredStorage",{methods:{init:function(e){this.engine=e},set:function(e,t,n){this.engine.set(e,t),n&&this.update(e,n)},get:function(e){return this.expired(e)?(this.engine.clear(e),null):this.engine.get(e)},sets:function(e){t.each(e,function(e,t){this.set(e,t.value,t.expiration)},this)},gets:function(e){var n={},i=Array.isArray(e)?e:this.__keys();return t.each(i,function(e,t){n[t]=this.get(t)},this),n},clear:function(e){this.engine.clears([e,this.__key(e)])},clears:function(e){t.each(e,function(e,t){this.clear(t)},this)},empty:function(){this.engine.clears()},update:function(e,t){this.engine.set(this.__key(e),this.timestamp()+t)},expired:function(e){var t=this.timeleft(this.__key(e));return null!==t&&t<=0},timeleft:function(e){var t=parseInt(this.engine.get(e));return t&&!isNaN(t)?t-this.timestamp():null},timestamp:function(){return Math.floor((new Date).getTime()/1e3)},__key:function(e){return"__nx_expired_storage_ts__"+e},__keys:function(){return this.engine.__keys().filter(function(e){return-1===e.indexOf("__nx_expired_storage_ts__")})}}});"undefined"!=typeof module&&module.exports&&(module.exports=n)}();