!function(){var t=t||this||window||Function("return this")(),e=t.nx||require("next-js-core2"),n=e.declare("nx.AbstractExpiredStorage",{methods:{init:function(t){this.EXPIRATION_PREFIX="__nx_expired_storage_ts__",this.engine=t},set:function(t,e,n){this.engine.set(t,e),n&&this.update(t,n)},get:function(t){return this.expired(t)?(this.engine.clear(t),null):this.engine.get(t)},sets:function(t){e.each(t,function(t,e){this.set(t,e.value,e.expiration)},this)},gets:function(t){var n={},i=Array.isArray(t)?t:this.__keys();return e.each(i,function(t,e){n[e]=this.get(e)},this),n},clear:function(t){this.engine.clears([t,this.__key(t)])},clears:function(t){e.each(t,function(t,e){this.clear(e)},this)},empty:function(){this.engine.clears()},update:function(t,e){this.engine.set(this.__key(t),this.timestamp()+e)},expired:function(t){var e=this.timeleft(this.__key(t));return null!==e&&e<=0},timeleft:function(t){var e=parseInt(this.engine.get(t));return e&&!isNaN(e)?e-this.timestamp():null},timestamp:function(){return Math.floor((new Date).getTime()/1e3)},__key:function(t){return this.EXPIRATION_PREFIX+t},__keys:function(){var t=this.engine.__keys(),e=this.EXPIRATION_PREFIX;return t.filter(function(t){return-1===t.indexOf(e)})}}});"undefined"!=typeof module&&module.exports&&(module.exports=n)}();